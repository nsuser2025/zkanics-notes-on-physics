<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Zkanics Notes on Physics</title>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

<script>
window.MathJax = {
    tex: { 
        packages: {'[+]': ['ams']}, // amsmath を追加
        inlineMath: [['$','$'], ['\\(','\\)']],
        processEscapes: true
    },
    options: { skipHtmlTags: ['script','style','textarea','pre'] },
    chtml: { matchFontHeight: false, displayAlign: "left", displayIndent: "2em" },
    loader: { load: ['[tex]/noerrors'] }
};
</script>

<script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" id="MathJax-script"></script>

<style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    #note-container { 
        border: 1px solid #ccc; 
        padding: 15px; 
        margin-top: 20px; 
        background-color: #ffffff;
        min-height: 200px;
    }
</style>
</head>
<body>

<h1>Zkanics Notes on Physics</h1>

<label for="chapter-select">topics:</label>
<select id="chapter-select" onchange="loadMarkdown(this.value)">
    <option value="" disabled selected>--- 選択してください ---</option>
    <option value="topics0001">文献調査</option>
    <option value="topics0002">充填層の流体解析</option>
    <option value="topics0003">Blount Identity</option>
    <option value="dem_topics0001">離散要素法（Discrete Element Method）</option>
    <option value="mdpd_refs">MDPD 参考文献リスト</option>
    <option value="ioz_topics0001">IOZ方程式</option>
    <option value="ioz_topics0002">IOZ方程式のLegendre多項式展開</option>
    <option value="ioz_topics0003">Legendre多項式展開の数値計算</option>
    <option value="pfm_topics0001">フェーズフィールド法</option>
    <option value="mlip_install">MLIP-3 インストール</option>
    <option value="deepmd_dplr">Deep Potential Long-Range</option>
    <option value="aenet_install">AENET ver.2.0.4 MPI インストール</option>
    <option value="aenet_lammps">ANN を用いた LAMMPS シミュレーション</option>
    <option value="reaxff_install">ReaxFFとfix bond/reactを使うためのLAMMPSインストール</option>
    <option value="fix_bond_react">LAMMPS fix bond/react</option>
    <option value="fix_bond_react_key">LAMMPS fix bond/react keyword</option>
    <option value="volume_fraction">体積分率</option>
    <option value="eff_volume_fraction">有効体積分率</option>
    <option value="kd_viscosity">Krieger-Dougherty 粘度推算モデル</option>
    <option value="gel_intro">懸濁液のゲル化</option>
    <option value="dpd_Pan2010">コロイド懸濁液の DPD シミュレーション（Pan2010）</option>
    <option value="kapsel_install">KAPSEL ver.4.30 インストール</option>
    <option value="sqs_quality">SQSの検証</option>
</select>

<div id="note-container">
    <p>ファイルを選択すると、ここに内容が表示されます。</p>
</div>

<script>
    // ----------------------------------------------------------------------
    // NOTE: この行は、Pythonスクリプトによって実際のMarkdownデータが挿入されます。
    // 例: const allMarkdownData = {"chapter001": "# 第1章...", "chapter2": "...};
    // MARKDOWN_DATA_PLACEHOLDER
    // ----------------------------------------------------------------------

    // Marked.js のオプション設定
    marked.setOptions({
        breaks: true,
        gfm: true,
    });

    /**
     * Pythonから渡されたデータからMarkdownをロード
     * @param {string} key - 読み込むノートのキー (例: 'chapter001')
     */
    function loadMarkdown(key) {
        if (!key) return;

        const container = document.getElementById('note-container');

        // キーに対応するMarkdownコンテンツを取得
        const markdownText = allMarkdownData[key]; 
        
        if (!markdownText) {
             container.innerHTML = `<p style="color: red;"><strong>エラー: データが見つかりませんでした。</strong></p>`;
             return;
        }

        // HTMLに変換
        container.innerHTML = marked.parse(markdownText);
        
        // MathJaxに数式の再レンダリングを要求
        MathJax.typesetPromise([container]);
    }
</script>

</body>
</html>
